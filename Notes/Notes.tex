\documentclass[titlepage, fleqn, a4paper, 12pt, twoside]{article}
\usepackage{geometry}
\usepackage{exsheets} %question and solution environments
\usepackage{amsmath, amssymb, amsthm} %standard AMS packages
\usepackage[utf8]{inputenc}
\usepackage{esint} %integral signs
\usepackage{marginnote} %marginnotes
\usepackage{gensymb} %miscellaneous symbols
\usepackage{commath} %differential symbols
\usepackage{xcolor} %colours
\usepackage{cancel} %cancelling terms
\usepackage[free-standing-units,space-before-unit]{siunitx} %formatting units
	\sisetup
	{
		per-mode=fraction,
		fraction-function=\frac
	}
\usepackage{tikz, pgfplots} %diagrams
	\usetikzlibrary{calc, hobby, patterns, intersections, angles, quotes, spy}
\usepackage{graphicx} %inserting graphics
\usepackage{hyperref} %hyperlinks
\usepackage{datetime} %date and time
\usepackage{enumerate, enumitem} %numbered lists
\usepackage{float} %inserting floats
\usepackage[american voltages]{circuitikz} %circuit diagrams
\usepackage{setspace} %double spacing
\usepackage{microtype} %micro-typography
\usepackage{listings} %formatting code
	\lstset{language=Matlab}
	\lstdefinestyle{standardMatlab}
	{
		belowcaptionskip=1\baselineskip,
		breaklines=true,
		frame=L,
		xleftmargin=\parindent,
		language=C,
		showstringspaces=false,
		basicstyle=\footnotesize\ttfamily,
		keywordstyle=\bfseries\color{green!40!black},
		commentstyle=\itshape\color{purple!40!black},
		identifierstyle=\color{blue},
		stringstyle=\color{orange},
	}
\usepackage{algpseudocode} %algorithms
\usepackage{algorithm} %algorithms
\usepackage{chemfig}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{todonotes}
\usepackage[noabbrev,capitalize]{cleveref}
\usepackage[section]{placeins}

\newcommand\numberthis{\addtocounter{equation}{1}\tag{\theequation}} %adds numbers to specific equations in non-numbered list of equations
 
\DeclareMathAlphabet{\mathcal}{OT1}{pzc}{m}{it}

\theoremstyle{definition}
\newtheorem{example}{Example}
\newtheorem{definition}{Definition}

\theoremstyle{theorem}
\newtheorem{theorem}{Theorem}
\newtheorem{law}{Law}

\makeatletter
\@addtoreset{section}{part} %resets section numbers in new part
\makeatother

\newcommand\blfootnote[1]{%
	\begingroup
	\renewcommand\thefootnote{}\footnote{#1}%
	\addtocounter{footnote}{-1}%
	\endgroup
}

\renewcommand{\marginfont}{\scriptsize \color{blue}}

\renewcommand{\tilde}{\widetilde}

\SetupExSheets{solution/print = true} %prints all solutions by default

%opening
\title{Electronic Devices}
\author{Aakash Jog}
\date{2015-16}

\begin{document}

\pagenumbering{roman}
\begin{titlepage}
\newgeometry{margin=0cm}
\maketitle
\end{titlepage}
\restoregeometry
%\setlength{\mathindent}{0pt}

\blfootnote
{	
	\begin{figure}[H]
		\includegraphics[height = 12pt]{cc.pdf}
		\includegraphics[height = 12pt]{by.pdf}
		\includegraphics[height = 12pt]{nc.pdf}
		\includegraphics[height = 12pt]{sa.pdf}
	\end{figure}
	This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. To view a copy of this license, visit \url{http://creativecommons.org/licenses/by-nc-sa/4.0/}.
} %CC-BY-NC-SA license

\tableofcontents

\clearpage
\listoffigures

\clearpage
\section{Lecturer Information}

\textbf{Tammy Ben-Yaacov}\\
~\\
E-mail: \href{mailto:tammybenyaacov@gmail.com}{tammybenyaacov@gmail.com}\\

\section{Instructor Information}

\textbf{Asia Shapira}\\
~\\
E-mail: \href{asiasapi@gmail.com}{asiasapi@gmail.com}

\section{Required Reading}

\begin{enumerate}
	\item Streetman, B. Solid State Electronic Devices
\end{enumerate}

\section{Additional Reading}

\begin{enumerate}
	\item Bar-Lev, A. Semiconductor and Electronic Devices
	\item S. M. Sze, Physics of Semiconductor Devices
	\item Kittel, C. (2005). Introduction to Solid State Physics
\end{enumerate}

\clearpage
\pagenumbering{arabic}

\part{}

\section{Energy Bands in Semiconductors}

\begin{figure}[h]
	\centering
	\begin{tikzpicture}
		\def\l{4};
		\def\eConduction{4};
		\def\eValence{2};
		\def\eIntrinsic{{\eConduction * 0.5 + \eValence * 0.5}};

		\begin{scope}
			\draw (0,\eValence) rectangle ++(\l,-1);
			\node at ($ (\l/2,\eValence) + (0,-0.5) $) {VB};
			\node [right] at (\l,\eValence) {$E_V$};
		\end{scope}

		\begin{scope}
			\draw (0,\eConduction) rectangle ++(\l,1);
			\node at ($ (\l/2,\eConduction) + (0,0.5) $) {CB};
			\node [right] at (\l,\eConduction) {$E_C$};
		\end{scope}

		\begin{scope}
			\draw [dashed] (0,\eIntrinsic) -- (\l,\eIntrinsic) node [right] {$E_i$};
		\end{scope}
	\end{tikzpicture}
	\caption{Energy Bands and Intrinsic Energy Level}
	\label{fig:Energy_Bands_and_Intrinsic_Energy_Level}
\end{figure}

\section{Determining Factors for Number of Charge Carriers in Energy Bands}

\subsection{Density of Allowed States in Bands}

The number of allowed states in the conduction and valence bands are denoted as $g_C(E)$ and $g_V(E)$, respectively.\\
There are no allowed states in the gap between the conduction and valence bands.

\begin{theorem}
	\begin{align*}
		g_C(E) & \approx \sqrt{E - E_C}
	\end{align*}
\end{theorem}

\subsection{Probability of Occupancy of Allowed States}

\begin{definition}[Fermi function]
	The probability that an available energy state $E$ will be occupied is
	\begin{align*}
		f(E) & = f_{\text{FD}}(E) \\
                     & = \frac{1}{1 + e^{\frac{E - E_f}{k T}}}
	\end{align*}
	where $E_f$ is the Fermi level or the Fermi energy, and $T$ is the temperature.
\end{definition}
Therefore, the graph of $f(E)$ with respect to $E$ is as in \cref{fig:Graph_of_Fermi_function_for_$T_1_>_T_2_>_T_3$}.
\begin{figure}[h]
	\centering
	\includegraphics[width = 0.8\textwidth]{./Plots/fermi_function.pdf}
	\caption{Graph of Fermi function for $T_1 > T_2 > T_3$}
	\label{fig:Graph_of_Fermi_function_for_$T_1_>_T_2_>_T_3$}
\end{figure}
If $E < E_f$,
\begin{align*}
	\lim\limits_{T \to 0} f(E) & = 1
\end{align*}
If $E = E_f$,
\begin{align*}
	f(E) & = \frac{1}{2}
\end{align*}
If $E_f < E$,
\begin{align*}
	\lim\limits_{T \to 0} f(E) & = 0
\end{align*}
Therefore, at $0 \kelvin$, $f(E)$ is the unit step function.
Therefore, at $0 \kelvin$, all electrons are at available energy levels less than $E_f$, i.e. in the valence band.
Hence, the conduction band is empty.

\section{Number of Electrons in Conduction Band}

\begin{theorem}
	Electrons in semiconductors obey Fermi-Dirac statistics.
\end{theorem}

Consider an energy band of thickness $\dif E$, at energy $E$, in the conduction band.
Therefore, the number of electrons in the band is
\begin{align*}
	\dif n(E) & = g_C(E) f(E) \dif E
\end{align*}
Therefore, the total number of electrons in the conduction band are
\begin{align*}
	n & = \int\limits_{E_C}^{E_{C} + \Delta} g_C(E) f(E) \dif E
\end{align*}
where $\Delta$ is the thickness of the conduction band.\\
As there are no allowed states above the conduction band,
\begin{align*}
	n & = \int\limits_{E_C}^{\infty} g_C(E) f(E) \dif E
\end{align*}

\section{Position of $E_F$}

The graphs of $f(E)$ and $1 - f(E)$ are as in \cref{fig:Graph_of_$f(E)$_and_$1_-_f(E)$} and ???.
\begin{figure}[h]
	\centering
	\includegraphics[width = 0.8\textwidth]{./Plots/fermi_function_and_one_minus_fermi_function.pdf}
	\caption{Graph of $f(E)$ and $1 - f(E)$}
	\label{fig:Graph_of_$f(E)$_and_$1_-_f(E)$}
\end{figure}
\begin{figure}[h]
	\centering
	\includegraphics[width = 0.8\textwidth]{./Plots/fermi_function_vertical.pdf}
	\caption{Graph of $f(E)$ and $1 - f(E)$ with $E_C$ and $E_V$}
	\label{fig:Graph_of_$f(E)$_and_$1_-_f(E)$_with_$E_C$_and_$E_V$}
\end{figure}
The area bounded by $f(E)$ above $E_C$, in \cref{fig:Graph_of_$f(E)$_and_$1_-_f(E)$_with_$E_C$_and_$E_V$}, represents the number of electrons in the conduction band.
Similarly, the area bounded by $1 - f(E)$ below $E_V$, in \cref{fig:Graph_of_$f(E)$_and_$1_-_f(E)$_with_$E_C$_and_$E_V$}, represents the number of holes in the valence band.\\
The densities of states for electrons and holes are given by
\begin{align*}
	g_C(E) & = \frac{4 \pi}{h^3} \left( 2 {m_e}^* \right)^{\frac{3}{2}} (E - E_C)^{\frac{1}{2}} \\
	g_V(E) & = \frac{4 \pi}{h^3} \left( 2 {m_h}^* \right)^{\frac{3}{2}} (E_V - E)^{\frac{1}{2}}
\end{align*}
Therefore, substituting and solving,
\begin{align*}
	n & = \frac{2}{h^3} \left( 2 \pi {m_e}^* k T \right)^{\frac{3}{2}} e^{-\frac{E_C - E_F}{k T}} \\
	p & = \frac{2}{h^3} \left( 2 \pi {m_h}^* k T \right)^{\frac{3}{2}} e^{-\frac{E_F - E_V}{k T}}
\end{align*}
The constants
\begin{align*}
	N_C & = \frac{2}{h^3} \left( 2 \pi {m_e}^* k T \right)^{\frac{3}{2}} \\
	N_V & = \frac{2}{h^3} \left( 2 \pi {m_h}^* k T \right)^{\frac{3}{2}} \\
\end{align*}
are called the effective density of states in the conduction band and the valence band respectively.

\subsection{Intrinsic Semiconductor}

At $0 \kelvin$, all electrons are in the valence band.
Therefore, for all electrons to be below $E_F$, $E_F$ must be between $E_C$ and $E_V$.\\
As the material is an intrinsic semiconductor,
\begin{align*}
	n                                                                          & = p                                                               \\
	\therefore \left( {m_e}^* \right)^{\frac{3}{2}} e^{-\frac{E_C - E_F}{k T}} & = \left( {m_h}^* \right)^{\frac{3}{2}} e^{-\frac{E_F - E_V}{k T}} \\
	\therefore \left( \frac{{m_e}^*}{{m_h}^*} \right)^{\frac{3}{2}}            & = e^{-\frac{E_F - E_V}{k T}} e^{\frac{E_C - E_F}{k T}}            \\
                                                                                   & = e^{\frac{E_C + E_V - 2 E_F}{k T}}
\end{align*}
Assuming ${m_e}^* = {m_h}^*$,
\begin{align*}
	1              & = e^{\frac{E_C + E_V - 2 E_F}{k T}} \\
	\therefore E_F & = \frac{E_C + E_V}{2}               \\
	\therefore E_F & = E_i
\end{align*}
Realistically, ${m_e}^* > {m_h}^*$.
Therefore, $E_F$ is below $E_i$.
However, as the difference between the effective masses, and hence $E_F$ and $E_i$ is small,
\begin{align*}
	E_F & \approx E_i
\end{align*}
This can be used as a practical approximation.
\begin{figure}[h]
	\centering
	\includegraphics[width = 0.8\textwidth]{./Plots/fermi_function_for_intrinsic.pdf}
	\caption{Position of $E_F$ for an Intrinsic semiconductor}
	\label{fig:Position_of_$E_F$_for_an_Intrinsic_semiconductor}
\end{figure}

\subsection{N-type Semiconductor}

In a N-type semiconductor,
\begin{align*}
	n & > p
\end{align*}
As $0 \kelvin$, all electrons must be either at in the valence band, or at $E_d$.
Therefore, for all electrons to be below $E_F$, $E_F$ must be between $E_d$ and $E_C$.
Therefore, as $E_d$ is closer to $E_C$ than to $E_V$, $E_F$ is also closer to $E_C$ than to $E_V$.\\
The number of electrons in the conduction band is equal to the area under the curve of $f(E)$, to the right of $E_C$.
\begin{figure}[h]
	\centering
	\includegraphics[width = 0.8\textwidth]{./Plots/fermi_function_for_N_type.pdf}
	\caption{Position of $E_F$ for an N-type semiconductor}
	\label{fig:Position_of_$E_F$_for_an_N-type_semiconductor}
\end{figure}

\subsection{P-type Semiconductor}

In a P-type semiconductor,
\begin{align*}
	p & > n
\end{align*}
As $0 \kelvin$, all electrons must be either at in the valence band, or at $E_a$.
Therefore, for all electrons to be below $E_F$, $E_F$ must be between $E_a$ and $E_C$.
Therefore, as $E_a$ is closer to $E_V$ than to $E_C$, $E_F$ is also closer to $E_V$ than to $E_C$.
\begin{figure}[h]
	\centering
	\includegraphics[width = 0.8\textwidth]{./Plots/fermi_function_for_P_type.pdf}
	\caption{Position of $E_F$ for an P-type semiconductor}
	\label{fig:Position_of_$E_F$_for_an_P-type_semiconductor}
\end{figure}

\section{Graphical Representation of Number of Electrons in the Conduction Band}

The number of allowed states in the conduction band is given by
\begin{align*}
	g_C(E) & = \frac{4 \pi}{h^3} \left( 2 {m_e}^* \right)^{\frac{3}{2}} (E - E_C)^{\frac{1}{2}} \\
               & \approx \sqrt{E - E_C}
\end{align*}
The probability of an energy state $E$ being occupied is given by
\begin{align*}
	f(E) & = \frac{1}{1 + e^{\frac{E - E_F}{k T}}}
\end{align*}
Therefore, the electron distribution in the conduction band is
\begin{align*}
	g_C(E) f(E) & = \sqrt{E - E_C} \frac{1}{1 + e^{\frac{E - E_F}{k T}}}
\end{align*}
Therefore, as $g_C(E)$ is zero for $E < E_C$, the graph of the electron distribution function is as in \cref{fig:Electron_distribution_function_in_the_conduction_band}.
\begin{figure}[h]
	\centering
	\includegraphics[width = 0.8\textwidth]{./Plots/electron_distribution_in_conduction_band.pdf}
	\caption{Electron distribution function in the conduction band}
	\label{fig:Electron_distribution_function_in_the_conduction_band}
\end{figure}

\section{Maxwell-Boltzmann Approximation}

The number of allowed states in the gap between the valence and conduction bands is zero.
Therefore, although the Fermi function is non zero in the energy gap, the number of electrons in the conduction band can be approximated as
\begin{align*}
	\frac{1}{1 + e^{\frac{E - E_F}{k T}}} & \approx e^{-\frac{E - E_F}{k T}}
\end{align*}
Therefore, integrating and solving,
\begin{align*}
	n & = N_C e^{\frac{E_C - E_F}{k T}}
\end{align*}
where $N_C$ is a constant which represents the effective density of states, and not a function of $E$.\\
Therefore, at equilibrium,
\begin{align*}
	n_0 & = N_C e^{-\frac{E_C - E_F}{k T}} \\
	p_0 & = N_V e^{-\frac{E_F - E_V}{k T}}
\end{align*}
Therefore,
\begin{align*}
	{n_i}^2        & = n_0 p_0                            \\
                       & = N_C N_V e^{-\frac{E_C - E_V}{k T}} \\
	\therefore n_i & = \sqrt{N_C N_V} e^{-\frac{E_{\text{gap}}}{2 k T}}
\end{align*}
Therefore,
\begin{align*}
	n & = N_C e^{-\frac{E_C - E_F}{k T}} \\
          & = N_C e^{-\frac{E_C - E_i}{k T}} e^{-\frac{E_i - E_F}{k T}}
\end{align*}
For an intrinsic material, i.e. when $E_F = E_i$,
\begin{align*}
	n & = n_i \\
\end{align*}
Therefore,
\begin{align*}
	n & = n_i e^{\frac{E_F - E_i}{k T}}
\end{align*}
Similarly,
\begin{align*}
	p & = n_i e^{\frac{E_i - E_F}{k T}}
\end{align*}
Therefore,
\begin{align*}
	E_F - E_i & = k T \ln\left( \frac{n}{n_i} \right) \\
	E_i - E_F & = k T \ln\left( \frac{p}{n_i} \right)
\end{align*}

\begin{question}
	Consider a sample of Si, doped with
	\begin{align*}
		N_D & = 10^{16} \si{\per\centi\metre\cubed}
	\end{align*}
	such that
	\begin{align*}
		E_C - E_D & = 0.05 \electronvolt
	\end{align*}
	\begin{enumerate}
		\item
			Draw $E_F$ as a function of $T$.
		\item
			How many dopants are ionized when $E_F = E_D$?
		\item
			Given
			\begin{align*}
				N_C & = 5 \times 10^{18} \si{\per\centi\metre\cubed}
			\end{align*}
			calculate the temperature when
			\begin{align*}
				E_F & = E_D
			\end{align*}
	\end{enumerate}
\end{question}

\begin{solution}
	\begin{enumerate}[leftmargin=*]
		\item
			Let the boundaries between the ionization and extrinsic regions and the extrinsic and intrinsic regions be $T_1$ and $T_2$ respectively.
			Therefore, for the ionization region, i.e. for $T < T_1$,
			\begin{align*}
				f(E < E_D) & = 1
			\end{align*}
			Therefore, $E_F$ is between $E_D$ and $E_C$.\\
			As the temperature increases, the some of the electrons which were previously at $E_D$ move to $E_C$.
			Therefore, the probability of electrons occupying the states at $E_D$ reduces, and that of $E_C$ increases.
			Therefore, the graph of $f(E)$ spreads out.
			Therefore, $E_F$ moves lower, and approaches $E_D$.\\
			Similarly, in the extrinsic region, $E_F$ is below $E_D$, and continues to move lower with increase in temperature.
			As the intrinsic carriers start ionizing, the rate of lowering of $E_F$ increases.\\
			In the intrinsic region,
			\begin{align*}
				E_F & = E_i
			\end{align*}
		\item
			\begin{align*}
				f(E_F)            & = \frac{1}{2} \\
				\therefore f(E_D) & = \frac{1}{2}
			\end{align*}
			Therefore, exactly half of the dopant states are occupied.
			Therefore, exactly half of the dopants are ionized.
		\item
			\begin{align*}
				n                                              & = N_C e^{-\frac{E_C - E_f}{k T}} \\
				\therefore \frac{N_D}{2}                       & = N_C e^{-\frac{E_C - E_D}{k T}} \\
				\therefore \ln\left( \frac{N_D}{2 N_C} \right) & = -\frac{E_C - E_D}{k T}         \\
				\therefore \ln\left( \frac{2 N_C}{N_D} \right) & = \frac{E_C - E_D}{k T}          \\
			\end{align*}
			Therefore,
			\begin{align*}
				T & = \frac{E_C - E_D}{k \ln\left( \frac{2 N_C}{N_D} \right)}                                                                                              \\
                                  & = \frac{0.05 \si{\electronvolt}}{\left( 8.6 \times 10^{-5} \si{\electronvolt\per\kelvin} \right) \ln\left( \frac{2.5 \times 10^{18}}{10^{16}} \right)} \\
                                  & = 85 \si{\kelvin}
			\end{align*}
	\end{enumerate}
\end{solution}

\begin{question}
	Consider a sample of Si at 300 \kelvin.
	The band diagram is as given.
	\begin{figure}[H]
		\centering
		\begin{tikzpicture}
			\def\l{2};
			\def\L{3};
			\def\h{1};
			\def\eValence{0};
			\def\eIntrinsic{1};
			\def\eConduction{2};
			\def\eFermi{0.5};

			\begin{scope}[yshift = \eValence cm]
				\draw (-2*\l,0) to (-\l,0) to [out = 0, in = 180] (0,-\h) to [out = 0, in = 180] (\l,0) to (2*\l,0) node [right] {$E_V$};
			\end{scope}

			\begin{scope}[yshift = \eIntrinsic cm, dashed]
				\draw (-2*\l,0) to (-\l,0) to [out = 0, in = 180] (0,-\h) to [out = 0, in = 180] (\l,0) to (2*\l,0) node [right] {$E_i$};
			\end{scope}

			\begin{scope}[yshift = \eConduction cm]
				\draw (-2*\l,0) to (-\l,0) to [out = 0, in = 180] (0,-\h) to [out = 0, in = 180] (\l,0) to (2*\l,0) node [right] {$E_C$};
			\end{scope}

			\begin{scope}
				\draw (-2*\l,\eFermi) -- (2*\l,\eFermi) node [right] {$E_F$};
			\end{scope}
			
			\begin{scope}[dashed]
				\draw (-\l,\eConduction) -- (-\l,{\eValence - \h}) node [below] {$x = -L$};
				\draw (0,{\eConduction}) -- (0,{\eValence - \h}) node [below] {$x = 0$};
				\draw (\l,\eConduction) -- (\l,{\eValence - \h}) node [below] {$x = +L$};
			\end{scope}
		\end{tikzpicture}
	\end{figure}
	Assume that at $x = 0$,
	\begin{align*}
		E_F - E_i & = \frac{E_{\text{gap}}}{4}
	\end{align*}
	and at $x = \pm L$,
	\begin{align*}
		E_i - E_F & = \frac{E_{\text{gap}}}{4}
	\end{align*}
	\begin{enumerate}
		\item Sketch $V(x)$, the electrostatic potential in the sample.
		\item Sketch the electric field $\mathcal{E}(x)$.
		\item Identify the different regions.
		\item Sketch the concentrations of the electrons and the holes.
		\item Find the directions of the electron currents.
	\end{enumerate}
\end{question}

\begin{solution}
	\begin{enumerate}[leftmargin=*]
		\item
			\begin{align*}
				E & = -q V
			\end{align*}
			Therefore, the graph of of $V(x)$ is
			\begin{figure}[H]
				\centering
				\begin{tikzpicture}
					\def\l{2};
					\def\L{3};
					\def\h{1};

					\draw (-2*\l,0) to (-\l,0) to [out = 0, in = 180] (0,\h) to [out = 0, in = 180] (\l,0) to (2*\l,0) node [right] {$V(x)$};

					\begin{scope}[dashed]
						\draw (-\l,\h) -- (-\l,0) node [below] {$x = -L$};
						\draw (0,\h) -- (0,0) node [below] {$x = 0$};
						\draw (\l,\h) -- (\l,0) node [below] {$x = L$};
					\end{scope}
				\end{tikzpicture}
			\end{figure}
		\item
			By Poisson's Equation,
			\begin{align*}
				\dod{V}{x} & = -\mathcal{E}
			\end{align*}
			Therefore, the graph of the field is of the form
			\begin{figure}[H]
				\centering
				\begin{tikzpicture}
					\def\l{2};
					\def\L{3};
					\def\h{1};

					\draw [rounded corners] (-2*\l,0) to (-\l,0) to [out = 0, in = 135] (-\l/2,-\h) to [out = 0, in = 180] (\l/2,\h) to [out = -45, in = 180] (\l,0) to (2*\l,0) node [right] {$V(x)$};

					\begin{scope}[dashed]
						\draw (-\l,\h) -- (-\l,0) node [below] {$x = -L$};
						\draw (0,\h) -- (0,0) node [below] {$x = 0$};
						\draw (\l,\h) -- (\l,0) node [below] {$x = L$};
					\end{scope}
				\end{tikzpicture}
			\end{figure}
		\item
			For $x < -L$, $E_F$ is below $E_i$.
			Therefore, the material is P-type.\\
			Therefore,
			\begin{align*}
				p & = n_i e^{\frac{E_i - E_f}{k T}}            \\
                                  & = 10^{10} e^{\frac{E_{\text{gap}}}{4 k T}} \\
                                  & = 3.92 \times 10^{14} \si{\per\centi\metre\cubed}
			\end{align*}
			Therefore,
			\begin{align*}
				n & = \frac{{n_i}^2}{p}                   \\
                                  & = \frac{10^{20}}{3.92 \times 10^{14}} \\
                                  & = 2.55 \times 10^5 \si{\per\centi\metre\cubed}
			\end{align*}
			~\\
			For $x = 0$, $E_F$ is above $E_i$.
			Therefore, the material is N-type.\\
			Therefore,
			\begin{align*}
				n & = n_i e^{\frac{E_i - E_f}{k T}}            \\
                                  & = 10^{10} e^{\frac{E_{\text{gap}}}{4 k T}} \\
                                  & = 3.92 \times 10^{14} \si{\per\centi\metre\cubed}
			\end{align*}
			Therefore,
			\begin{align*}
				p & = \frac{{n_i}^2}{n}                   \\
                                  & = \frac{10^{20}}{3.92 \times 10^{14}} \\
                                  & = 2.55 \times 10^5 \si{\per\centi\metre\cubed}
			\end{align*}
			~\\
			For $x < -L$, $E_F$ is below $E_i$.
			Therefore, the material is P-type.\\
			Therefore,
			\begin{align*}
				p & = n_i e^{\frac{E_i - E_f}{k T}}            \\
                                  & = 10^{10} e^{\frac{E_{\text{gap}}}{4 k T}} \\
                                  & = 3.92 \times 10^{14} \si{\per\centi\metre\cubed}
			\end{align*}
			Therefore,
			\begin{align*}
				n & = \frac{{n_i}^2}{p}                   \\
                                  & = \frac{10^{20}}{3.92 \times 10^{14}} \\
                                  & = 2.55 \times 10^5 \si{\per\centi\metre\cubed}
			\end{align*}
		\item
			~\\
			\begin{figure}[H]
				\centering
				\begin{tikzpicture}
					\def\l{2};
					\def\L{3};
					\def\h{1};

					\draw (-2*\l,0) to (-\l,0) to [out = 0, in = 180] (0,\h) to [out = 0, in = 180] (\l,0) to (2*\l,0) node [right] {electrons};
					\draw [yshift = \h cm] (-2*\l,0) to (-\l,0) to [out = 0, in = 180] (0,-\h) to [out = 0, in = 180] (\l,0) to (2*\l,0) node [right] {holes};

					\begin{scope}[dashed]
						\draw (-\l,\h) -- (-\l,0) node [below] {$x = -L$};
						\draw (0,\h) -- (0,0) node [below] {$x = 0$};
						\draw (\l,\h) -- (\l,0) node [below] {$x = L$};
					\end{scope}
				\end{tikzpicture}
			\end{figure}
		\item
			The concentration of the electrons is higher at the centre that at the ends.
			Therefore, the electrons flow outwards.
			Therefore, the electron diffusion current is directed outwards.\\
			The electric field is directed leftwards for $x < 0$, and rightwards for $x > 0$.
			Therefore, the electron drift current is directed inwards.
	\end{enumerate}
\end{solution}

\section{Space Charge Neutrality}

For a material to be neutral, the total negative charges must be equal to the total positive charges.
Therefore,
\begin{align*}
	n_0 + {N_A}^- & = p_0 + {N_D}^-
\end{align*}
Also,
\begin{align*}
	n_0     & = N_C e^{-\frac{E_C - E_F}{k T}} \\
	p_0     & = N_V e^{-\frac{E_F - E_V}{k T}} \\
	{N_A}^- & = N_A f(E_A)                     \\
	{N_D}^+ & = N_D \left( 1 - f(E_A) \right)
\end{align*}
Therefore,
\begin{align*}
	N_C e^{-\frac{E_C - E_F}{k T}} + N_A f(E_A) & = N_V e^{-\frac{E_F - E_V}{k T}} + N_D \left( 1 - f(E_D) \right)
\end{align*}

\clearpage
\part{PN Junctions}

\section{Step Junction}

\begin{definition}[Electron affinity]
	The electron affinity for a semiconductor is defined to be
	\begin{align*}
		q \chi & = E_{\text{vac}} - E_C
	\end{align*}
	where $E_{\text{vac}}$ is the energy of a free particle.
	The electron affinity is material dependent.\\
\end{definition}

\begin{definition}[Semiconductor work function]
	The semiconductor work function is defined to be
	\begin{align*}
		q \Phi_S & = E_{\text{vac}} - E_F
	\end{align*}
	The semiconductor work function is doping dependent.
\end{definition}

Consider a P-type semiconductor with $p = N_A$ and a N-type semiconductor with $n = N_D$.\\
Let the two be placed separately.\\
Let $E_{F_p}$ and $E_{F_n}$ be the Fermi levels for the P-type and the N-type semiconductors respectively.\\
Therefore,
\begin{align*}
	q \chi       & = E_{\text{vac}} - E_C     \\
	q \Phi_{S_p} & = E_{\text{vac}} - E_{F_p} \\
	q \Phi_{S_n} & = E_{\text{vac}} - E_{F_n}
\end{align*}
Let these semiconductors be brought into contact as in \cref{fig:Structure_of_Step_PN_Junction} and allowed to reach equilibrium.
\begin{figure}[h]
	\centering
	\begin{tikzpicture}
		\def\l{2};
		\def\h{1};

		\draw (-\l,-\h/2) rectangle (0,\h/2);
		\draw (-,-\h/2) rectangle (\l,\h/2);

		\node at (-\l/2,0) {P-type};
		\node at (\l/2,0) {N-type};
	\end{tikzpicture}
	\caption{Structure of Step PN Junction}
	\label{fig:Structure_of_Step_PN_Junction}
\end{figure}
At equilibrium, the Fermi levels must match up, and $E_F$ must be constant.\\
~\\
The carrier concentrations in the junction are as in \cref{fig:Carrier_Concentrations_in_Step_PN_Junction}.
\begin{figure}[h]
	\centering
	\begin{tikzpicture}
		\def\xMIN{-4};
		\def\xMAX{4};
		\def\yMIN{-4};
		\def\yMAX{4};
		\def\NA{-2};
		\def\ND{2};

		\begin{scope}[stealth-stealth]
			\draw (\xMIN,0) -- (\xMAX,0) node [right] {$x$};
			\draw (0,\yMIN) -- (0,\yMAX);
		\end{scope}

		\begin{scope}
			\draw (\xMIN,\NA) node [left] {$N_A$} -- (0,\NA);
			\draw (0,\ND) -- (\xMAX,\ND) node [right] {$N_D$};
			\node [above] at (\xMIN/2,\yMAX) {P-type};
			\node [above] at (\xMAX/2,\yMAX) {N-type};
		\end{scope}
	\end{tikzpicture}
	\caption{Carrier Concentrations in Step PN Junction}
	\label{fig:Carrier_Concentrations_in_Step_PN_Junction}
\end{figure}
Therefore, the carriers diffuse from regions of higher concentration to regions of lower concentrations, i.e., the electrons diffuse from the N-type region to the P-type region, and the holes diffuse from the P-type region to the N-type region.\\
This diffusion occurs in a region closer to the junction, and not in the regions near the ends.
This region is called the depletion region.\\
As these mobile carriers diffuse, they leave behind the ionized dopants, which are fixed charges.
This causes an internal electric field $\mathcal{E}$ in the depletion region, directed from the N-type region to the P-type region.
This generated electric field repels the diffusing carriers.
Therefore, the diffusion is stopped.
The width of the depletion region when the diffusion stops is denoted by $W$ or $W_d$.\\
The width of the depletion region on the P-type side is denoted by $x_p$, and that on the N-type side is denoted by $x_n$.
~\\
The currents generated due to the drifting charge carriers are opposite in direction to the currents generated due to the diffusing charge carriers.
Therefore, the net current in the PN junction is zero.\\

\subsection{Charge Density}

Let the cross-sectional area of the junction be $A$.
Therefore, the total positive charge in the P-type region is
\begin{align*}
	Q_+ & = q N_D x_n A
\end{align*}
where $q$ is the charge on an electron.\\
Therefore, the charge density in the N-type region is
\begin{align*}
	\rho & = \frac{Q_+}{x_n A} \\
             & = q N_D
\end{align*}
Similarly, the charge density in the P-type region is
\begin{align*}
	\rho & = q N_A
\end{align*}
Therefore, as the junction is electrically neutral,
\begin{align*}
	Q_+                    & = Q_-         \\
	\therefore q N_D x_n A & = q N_A x_p A \\
	\therefore N_D x_n     & = N_A x_p
\end{align*}

\subsection{Electric Field}

By Gauss' Law,
\begin{align*}
	\dod{\mathcal{E}}{x} & = \frac{\rho}{\varepsilon \varepsilon_0}
\end{align*}
where $\varepsilon$ is the relative permittivity of the material, and $\varepsilon_0$ is the permittivity of vacuum.\\
The charge density in the junction is
\begin{align*}
	\rho(x)                & =
		\begin{cases}
			-q N_A & ;\quad -x_p < x < 0 \\
			q N_D  & ;\quad 0 < x < x_n  \\
		\end{cases}
\end{align*}
Therefore, integrating,
\begin{align*}
	\mathcal{E}(x) &=
		\begin{cases}
			-\frac{q N_A}{\varepsilon \varepsilon_0} x + c_1 & ;\quad -x_p < x < 0 \\
			\frac{q N_D}{\varepsilon \varepsilon_0} x + c_2  & ;\quad 0 < x < x_n  \\
		\end{cases}
\end{align*}
At the boundaries of the depletion region,
\begin{align*}
	\mathcal{E}(-x_p) & = 0 \\
	\mathcal{E}(x_n)  & = 0
\end{align*}
Therefore, substituting,
\begin{align*}
	c_1 & = -\frac{q N_A}{\varepsilon \varepsilon_0} x_p \\
	c_2 & = -\frac{q N_D}{\varepsilon \varepsilon_0} x_n
\end{align*}
Therefore,
\begin{align*}
	\mathcal{E}(x) &=
		\begin{cases}
			-\frac{q N_A}{\varepsilon \varepsilon_0} x - \frac{q N_A}{\varepsilon \varepsilon_0} & ;\quad -x_p < x < 0 \\
			\frac{q N_D}{\varepsilon \varepsilon_0} x - \frac{q N_D}{\varepsilon \varepsilon_0}  & ;\quad 0 < x < x_n  \\
		\end{cases}
\end{align*}

\subsection{Electrostatic Potential}

\begin{align*}
	\dod{V}{x} &= -\mathcal{E}
\end{align*}
The electric field in the junction is
\begin{align*}
	\mathcal{E}(x) &=
		\begin{cases}
			-\frac{q N_A}{\varepsilon \varepsilon_0} x - \frac{q N_A}{\varepsilon \varepsilon_0} & ;\quad -x_p < x < 0 \\
			\frac{q N_D}{\varepsilon \varepsilon_0} x - \frac{q N_D}{\varepsilon \varepsilon_0}  & ;\quad 0 < x < x_n  \\
		\end{cases}
\end{align*}
Therefore, integrating,
\begin{align*}
	V(x) &=
		\begin{cases}
			\frac{q N_A}{\varepsilon \varepsilon_0} \left( \frac{x^2}{2} + x_p x + c_1 \right)  & ;\quad -x_p < x < 0 \\
			-\frac{q N_D}{\varepsilon \varepsilon_0} \left( \frac{x^2}{2} - x_n x + c_2 \right) & ;\quad 0 < x < x_n  \\
		\end{cases}
\end{align*}
At the boundaries of the depletion region,
\begin{align*}
	V(-x_p) & = 0 \\
	V(x_n)  & = V_{\text{BI}}
\end{align*}
Therefore, substituting,
\begin{align*}
	c_1 & = \frac{{x_p}^2}{2} \\
	c_2 & = -\frac{\varepsilon \varepsilon_0 V_{\text{BI}}}{q N_D} + \frac{{x_n}^2}{2}
\end{align*}
Therefore,
\begin{align*}
	V(x) &=
		\begin{cases}
			\frac{q N_A}{\varepsilon \varepsilon_0} \left( \frac{x^2}{2} + x_p x + \frac{{x_p}^2}{2} \right)                  & ;\quad -x_p < x < 0 \\
			\frac{q N_D}{\varepsilon \varepsilon_0} \left( \frac{x^2}{2} - x_n x + \frac{{x_n}^2}{2} \right) + V_{\text{BI}} \\
		\end{cases}\\
	&=
		\begin{cases}
			\frac{q N_A}{2 \varepsilon \varepsilon_0} (x + x_p)^2                  & ;\quad -x_p < x < 0 \\
			-\frac{q N_D}{2 \varepsilon \varepsilon_0} (x - x_n)^2 + V_{\text{BI}} & ;\quad 0 < x < x_n  \\
		\end{cases}
\end{align*}

\subsection{Energy Bands}

\begin{align*}
	\dod{E}{x} & = -q V_{\text{BI}}
\end{align*}
Therefore, the energy band diagram for the junction is as in \cref{fig:Energy_Band_Diagram_for_PN_Junction}.
\begin{figure}[h]
	\centering
	\begin{tikzpicture}[scale = 2]
		\def\eConductionP{3};
		\def\eConductionN{2};
		\def\eIntrinsicP{2};
		\def\eIntrinsicN{1};
		\def\eValenceP{1};
		\def\eValenceN{0};
		\def\eFermi{1.5};
		\def\l{3};
		\def\W{1};

		\begin{scope}
			\draw (-\l,\eConductionP) node [left] {$E_C$} -- (-\W/2,\eConductionP);
			\draw [dashed] (-\l,\eIntrinsicP) node [left] {$E_i$} -- (-\W/2,\eIntrinsicP);
			\draw (-\l,\eValenceP) node [left] {$E_V$} -- (-\W/2,\eValenceP);
		\end{scope}

		\begin{scope}
			\draw (-\W/2,\eConductionP) to [out = 0, in = 180] (\W/2,\eConductionN);
			\draw [dashed] (-\W/2,\eIntrinsicP) to [out = 0, in = 180] (\W/2,\eIntrinsicN);
			\draw (-\W/2,\eValenceP) to [out = 0, in = 180] (\W/2,\eValenceN);
		\end{scope}

		\begin{scope}
			\draw (\W/2,\eConductionN) -- (\l,\eConductionN) node [right] {$E_C$};
			\draw [dashed] (\W/2,\eIntrinsicN) -- (\l,\eIntrinsicN) node [right] {$E_i$};
			\draw (\W/2,\eValenceN) -- (\l,\eValenceN) node [right] {$E_V$};
		\end{scope}

		\begin{scope}
			\draw (-\l,\eFermi) node [left] {$E_F$} -- (\l,\eFermi) node [right] {$E_F$};
		\end{scope}

		\begin{scope}[dashed]
			\draw (-\W/2,\eConductionP + 1) -- (-\W/2,\eValenceN - 1);
			\draw (\W/2,\eConductionP + 1) -- (\W/2,\eValenceN - 1);
			\node [above] at (-\l/2 - \W/4,\eConductionP + 1) {P-type};
			\node [above] at (\l/2 + \W/4,\eConductionP + 1) {N-type};
			\node [above] at (0,\eConductionP + 1) {depletion region};
		\end{scope}
	\end{tikzpicture}
	\caption{Energy Band Diagram for PN Junction}
	\label{fig:Energy_Band_Diagram_for_PN_Junction}
\end{figure}

By definition, the builtin voltage is
\begin{align*}
	q V_{\text{BI}}          & = (E_C)_{\text{P-type side}} - (E_C)_{\text{N-type side}}                       \\
                                 & = (E_i - E_F)_{\text{P-type side}} + (E_F - E_i)_{\text{N-type side}}           \\
                                 & = k T \ln\left( \frac{p}{n_i} \right) + k T \ln\left( \frac{n}{n_i} \right)     \\
                                 & = k T \ln\left( \frac{N_A}{n_i} \right) + k T \ln\left( \frac{N_D}{n_i} \right) \\
                                 & = k T \ln\left( \frac{N_A N_D}{{n_i}^2} \right)                                 \\
	\therefore V_{\text{BI}} & = \frac{k T}{q} \ln\left( \frac{N_A N_D}{{n_i}^2} \right)
\end{align*}

\subsection{Width of Depletion Region}

For step junctions,
\begin{align*}
	W   & = \sqrt{\frac{2 \varepsilon \varepsilon_0 V_{\text{BI}}}{q} \left( \frac{N_A + N_D}{N_A N_D} \right)} \\
	x_p & = \frac{W N_D}{N_A + N_D}                                                                             \\
	x_n & = \frac{W N_A}{N_A + N_D}
\end{align*}

\begin{question}
	A silicon PN step junction at equilibrium at $300 \kelvin$ has
	\begin{align*}
		N_A & = 10^{16} \si{\per\centi\metre\cubed} \\
		N_D & = 10^{16} \si{\per\centi\metre\cubed}
	\end{align*}
	\begin{enumerate}
		\item Sketch $\rho(x)$.
		\item Calculate $\mathcal{E}_{\text{max}}$.
	\end{enumerate}
\end{question}

\begin{solution}
	\begin{enumerate}[leftmargin=*]
		\item
			\begin{align*}
				V_{\text{BI}} & = \frac{k T}{q} \ln\left( \frac{N_A N_D}{{n_i}^2} \right)              \\
                                              & = \left( 0.026 \volt \right) \ln\left( \frac{10^{32}}{10^{20}} \right) \\
                                              & = 0.718 \volt
			\end{align*}
			Therefore,
			\begin{align*}
				W & = \sqrt{\frac{2 \varepsilon \varepsilon_0 V_{\text{BI}}}{q} \left( \frac{N_A + N_D}{N_A N_D} \right)}                                                                                                          \\
                                  & = \sqrt{\frac{(2) (11.8) \left( 8.85 \times 10^{-14} \si{\farad\per\centi\metre} \right) (0.718 \volt)}{1.6 \times 10^{-19} \coulomb} \left( \frac{2 \times 10^{16}}{10^{32}} \si{\centi\metre\cubed} \right)} \\
                                  & = 4.32 \times 10^{-5} \si{\centi\metre}                                                                                                                                                                        \\
                                  & = 0.432 \si{\micro\metre}
			\end{align*}
			Therefore,
			\begin{align*}
				N_D x_n        & = N_A x_p     \\
				\therefore x_n & = x_p         \\
                                               & = \frac{W}{2} \\
                                               & = 0.216 \si{\micro\metre}
			\end{align*}
			Therefore,
			\begin{figure}[H]
				\centering
				\begin{tikzpicture}
					\def\xMIN{-4};
					\def\xMAX{4};
					\def\yMIN{-2};
					\def\yMAX{2};
					\def\xN{2};
					\def\xP{2};
					\def\qNA{1};
					\def\qND{1};

					\begin{scope}[stealth-stealth]
						\draw (\xMIN,0) -- (\xMAX,0) node [right] {$x$};
						\draw (0,\yMIN) -- (0,\yMAX) node [above] {$\rho(x)$};
					\end{scope}

					\begin{scope}
						\draw (0,\qND) -- (\xN,\qND);
						\draw (-\xP,-\qNA) -- (0,-\qNA);
					\end{scope}

					\begin{scope}
						\filldraw (0,-\qNA) circle(1pt) node [right] {$q N_A$};
						\filldraw (0,\qND) circle (1pt) node [left] {$q N_D$};
						\filldraw (\xN,0)  circle (1pt) node [below] {$x_n$};
						\filldraw (-\xP,0) circle (1pt) node [below] {$-x_p$};
					\end{scope}
				\end{tikzpicture}
			\end{figure}
		\item
			The field is maximum at the interface of the two regions.
			Therefore,
			\begin{align*}
				\mathcal{E}_{\text{max}} & = \frac{q N_D x_p}{\varepsilon \varepsilon_0}                                                                                                                                                                                        \\
                                                         & = \frac{\left( 1.6 \times 10^{-19} \coulomb \right) \left( 10^{16} \si{\per\centi\metre\cubed} \right) \left( 2.16 \times 10^{-5} \si{\centi\metre} \right)}{(11.8) \left( 8.85 \times 10^{-14} \si{\farad\per\centi\metre} \right)} \\
                                                         & = 3.31 \times 10^4 \si{\volt\per\centi\metre}
			\end{align*}
	\end{enumerate}
\end{solution}

\begin{question}
	A silicon PN step junction at equilibrium at $300 \kelvin$ has
	\begin{align*}
		N_A & = 10^{16} \si{\per\centi\metre\cubed} \\
		N_D & = 10^{17} \si{\per\centi\metre\cubed}
	\end{align*}
	\begin{enumerate}
		\item Sketch $\rho(x)$.
		\item Sketch $\mathcal{E}(x)$.
		\item Sketch $V(x)$.
	\end{enumerate}
\end{question}

\begin{solution}
	\begin{enumerate}[leftmargin=*]
		\item 
			\begin{align*}
				N_A x_p                & = N_D x_n     \\
				\therefore 10^{16} x_p & = 10^{17} x_n \\
				\therefore x_p         & = 10 x_n
			\end{align*}
			Therefore,
			\begin{align*}
				V_{\text{BI}} & = \frac{k T}{q} \ln\left( \frac{N_A N_D}{{n_i}^2} \right) \\
                                              & = 0.778 \volt
			\end{align*}
			Therefore,
			\begin{align*}
				W & = \sqrt{\frac{2 \varepsilon \varepsilon_0 V_{\text{BI}}}{q} \frac{N_A + N_D}{N_A N_D}} \\
                                  & = 0.334 \si{\micro\metre}
			\end{align*}
			Therefore,
			\begin{align*}
				x_n & = 0.031 \si{\micro\metre} \\
				x_p & = 0.303 \si{\micro\metre}
			\end{align*}
			Therefore,
			\begin{figure}[H]
				\centering
				\begin{tikzpicture}
					\def\xMIN{-4};
					\def\xMAX{4};
					\def\yMIN{-3};
					\def\yMAX{3};
					\def\xN{0.2};
					\def\xP{2};
					\def\qNA{0.2};
					\def\qND{2};

					\begin{scope}[stealth-stealth]
						\draw (\xMIN,0) -- (\xMAX,0) node [right] {$x$};
						\draw (0,\yMIN) -- (0,\yMAX) node [above] {$\rho(x)$};
					\end{scope}

					\begin{scope}
						\draw (0,\qND) -- (\xN,\qND);
						\draw (-\xP,-\qNA) -- (0,-\qNA);
					\end{scope}

					\begin{scope}
						\filldraw (0,-\qNA) circle(1pt) node [right] {$q N_A$};
						\filldraw (0,\qND) circle (1pt) node [left] {$q N_D$};
						\filldraw (\xN,0)  circle (1pt) node [above] {$x_n$};
						\filldraw (-\xP,0) circle (1pt) node [above] {$x_p$};
					\end{scope}
				\end{tikzpicture}
			\end{figure}
		\item
			The field is maximum at the interface of the two regions.
			\begin{align*}
				\mathcal{E}_{max} & = \frac{q N_D x_n}{\varepsilon \varepsilon_0}                                                                                                      \\
                                                  & = \frac{\left( 1.6 \times 10^{-19} \right) \left( 10^{17} \right) \left( 0.031 \times 10^{-4} \right)}{(11.8) \left( 8.85 \times 10^{-14} \right)} \\
                                                  & = 4.75 \times 10^4 \si{\volt\per\centi\metre}
			\end{align*}
			The field at the ends of the depletion region is
			\begin{align*}
				\mathcal{E}(-x_p) & = 0 \\
				\mathcal{E}(x_n)  & = 0
			\end{align*}
			Therefore,
			\begin{figure}[H]
				\centering
				\begin{tikzpicture}
					\def\xMIN{-4};
					\def\xMAX{4};
					\def\yMIN{-3};
					\def\yMAX{3};
					\def\xN{0.2};
					\def\xP{2};
					\def\EMAX{2};

					\begin{scope}[stealth-stealth]
						\draw (\xMIN,0) -- (\xMAX,0) node [right] {$x$};
						\draw (0,\yMIN) -- (0,\yMAX) node [above] {$(x)$};
					\end{scope}

					\begin{scope}
						\draw (-\xP,0) -- (0,-\EMAX);
						\draw (0,-\EMAX) -- (\xN,0);
					\end{scope}

					\begin{scope}
						\filldraw (0,-\EMAX) circle(1pt) node [right] {$E_{\text{max}}$};
						\filldraw (\xN,0)  circle (1pt) node [above] {$x_n$};
						\filldraw (-\xP,0) circle (1pt) node [above] {$-x_p$};
					\end{scope}
				\end{tikzpicture}
			\end{figure}
		\item
			Let the potential at $x = -x_p$ be
			\begin{align*}
				V(-x_p) & = 0
			\end{align*}
			Therefore, by definition,
			\begin{align*}
				V(x_n) & = V_{\text{BI}}
			\end{align*}
			Therefore,
			\begin{figure}[H]
				\centering
				\begin{tikzpicture}
					\def\xMIN{-4};
					\def\xMAX{4};
					\def\yMIN{-3};
					\def\yMAX{3};
					\def\xN{0.2};
					\def\xP{2};
					\def\VBI{2};

					\begin{scope}[stealth-stealth]
						\draw (\xMIN,0) -- (\xMAX,0) node [right] {$x$};
						\draw (0,\yMIN) -- (0,\yMAX) node [above] {$V(x)$};
					\end{scope}

					\begin{scope}
						\draw (-\xP,0) to [out = 0, in = 180] (\xN,\VBI);
					\end{scope}

					\begin{scope}
						\filldraw (0,\VBI) circle(1pt) node [left] {$V_{\text{BI}}$};
						\filldraw (\xN,0)  circle (1pt) node [above] {$x_n$};
						\filldraw (-\xP,0) circle (1pt) node [above] {$-x_p$};
					\end{scope}
				\end{tikzpicture}
			\end{figure}
	\end{enumerate}
\end{solution}

\begin{question}
	A PiN junction is constructed as by inserting a thin intrinsic semiconductor of thickness $x_i$ between the regions of a PN junction diode.
	It is kept at $300 \kelvin$ at equilibrium.
	\begin{enumerate}
		\item Find $\rho(x)$.
		\item Find $\mathcal{E}(x)$.
		\item Find $V(x)$.
	\end{enumerate}
\end{question}

\begin{solution}
	\begin{enumerate}[leftmargin=*]
		\item
			\begin{align*}
				Q_+ & = q N_D A \left( x_n - \frac{x_i}{2} \right) \\
				Q_- & = q N_A A \left( x_p - \frac{x_i}{2} \right)
			\end{align*}
			Therefore, as the sample is electrically neutral,
			\begin{align*}
				Q_+                                               & = Q_- \\
				\therefore N_D \left( x_n - \frac{x_i}{2} \right) & = N_A \left( x_p - \frac{x_i}{2} \right)
			\end{align*}
			Therefore,
			\begin{align*}
				\rho(x) &=
					\begin{cases}
						-q N_A & ;\quad -x_p < x < -\frac{x_i}{2}          \\
						0      & ;\quad -\frac{x_i}{2} < x < \frac{x_i}{2} \\
						q N_D  & ;\quad \frac{x_i}{2} < x < x_n            \\
					\end{cases}
			\end{align*}
		\item
			\begin{align*}
				\dod{\mathcal{E}}{x} & = \frac{\rho}{\varepsilon \varepsilon_0}
			\end{align*}
			Therefore,
			\begin{align*}
				\mathcal{E}(x) &=
					\begin{cases}
						-\frac{q N_A}{\varepsilon \varepsilon_0} x + c_1 & ;\quad -x_p < x < -\frac{x_i}{2}          \\
						c_2                                              & ;\quad -\frac{x_i}{2} < x < \frac{x_i}{2} \\
						\frac{q N_D}{\varepsilon \varepsilon_0} x + c_2  & ;\quad \frac{x_i}{2} < x < x_n            \\
					\end{cases}
			\end{align*}
			The electric field at the ends of the depletion region is
			\begin{align*}
				\mathcal{E}(-x_p) & = 0 \\
				\mathcal{E}(x_n)  & = 0
			\end{align*}
			The electric field must be continuous at the ends of the intrinsic region.
			Therefore, solving,
			\begin{align*}
				c_1 & = -\frac{q N_A x_p}{\varepsilon \varepsilon_0}                                \\
				c_2 & = -\frac{q N_A}{\varepsilon \varepsilon_0} \left( x_p - \frac{x_i}{2} \right) \\
                                    & = \frac{q N_D}{\varepsilon \varepsilon_0} \left( \frac{x_i}{2} - x_n \right)  \\
				c_3 & = -\frac{q N_D x_n}{\varepsilon \varepsilon_0}
			\end{align*}
			Therefore,
			\begin{align*}
				\mathcal{E}(x) &=
					\begin{cases}
						-\frac{q N_A}{\varepsilon \varepsilon_0} (x + x_p)                          & ;\quad -x_p < x < -\frac{x_i}{2}          \\
						-\frac{q N_A}{\varepsilon \varepsilon_0} \left( x_p - \frac{x_i}{2} \right) & ;\quad -\frac{x_i}{2} < x < \frac{x_i}{2} \\
						\frac{q N_D}{\varepsilon \varepsilon_0} (x - x_n)                           & ;\quad \frac{x_i}{2} < x < x_p            \\
					\end{cases}
			\end{align*}
		\item
			\begin{align*}
				\dod{V}{x} & = -\mathcal{E}
			\end{align*}
			Therefore,
			\begin{align*}
				V(x) &=
					\begin{cases}
						\frac{q N_A}{\varepsilon \varepsilon_0} \left( \frac{x^2}{2} + x_p x + c_1 \right)  & ;\quad -x_p < x < -\frac{x_i}{2}          \\
						\frac{q N_A}{\varepsilon \varepsilon_0} \left( x_p - \frac{x_i}{2} \right) x + c_2  & ;\quad -\frac{x_i}{2} < x < \frac{x_i}{2} \\
						-\frac{q N_D}{\varepsilon \varepsilon_0} \left( \frac{x^2}{2} - x_n x + c_3 \right) & ;\quad \frac{x_1}{2} < x < x_n            \\
					\end{cases}
			\end{align*}
			Let the potential at $x = -x_p$ be
			\begin{align*}
				V(-x_p) & = 0
			\end{align*}
			Therefore, by definition,
			\begin{align*}
				V(x_n) & = V_{\text{BI}}
			\end{align*}
			Therefore, solving and sustituting,
			\begin{align*}
				V(x) &=
					\begin{cases}
						\frac{q N_A}{2 \varepsilon \varepsilon_0} (x + x_p)^2                                                               & ;\quad -x_p < x < -\frac{x_i}{2}          \\
						\frac{q N_A}{\varepsilon \varepsilon_0} \left( x_p - \frac{x_i}{2} \right) \left( x_p + \frac{x_i}{2} + 2 x \right) & ;\quad -\frac{x_i}{2} < x < \frac{x_i}{2} \\
						V_{\text{BI}} - \frac{q N_D}{2 \varepsilon \varepsilon_0} (x_n - x)^2                                               & ;\quad \frac{x_1}{2} < x < x_n            \\
					\end{cases}
			\end{align*}
	\end{enumerate}
\end{solution}

\section{PN Junction with Linearly Graded Doping Profile}

Consider a PN junction such that
\begin{align*}
	N_D - N_A & = a x
\end{align*}
where $a > 0$.\\
Therefore, the doping profile is as in \cref{fig:Doping_Profile_in_Linearly_Doped_PN_Junction}.
\begin{figure}[h]
	\centering
	\begin{tikzpicture}
		\def\xMIN{-4};
		\def\xMAX{4};
		\def\yMIN{-4};
		\def\yMAX{4};
		\def\a{1};
		\def\xP{2};
		\def\xN{2};

		\begin{scope}[stealth-stealth]
			\draw (\xMIN,0) -- (\xMAX,0) node [right] {$x$};
			\draw (0,\yMIN) -- (0,\yMAX) node [above] {$N_D - N_A$};
		\end{scope}

		\begin{scope}
			\draw (\xMIN,\a*\xMIN) -- (\xMIN,\a*\xMIN);
			\draw (\xMIN,\a*\xMIN) -- (0,0);
			\draw (0,0) -- (\xMAX,\a*\xMAX);
			\draw (\xMAX,\a*\xMAX) -- (\xMAX,\a*\xMAX);
		\end{scope}

		\begin{scope}
			\node at (\xMIN/2,\yMAX) {P-type};
			\node at (\xMAX/2,\yMAX) {N-type};
		\end{scope}
	\end{tikzpicture}
	\caption{Doping Profile in Linearly Doped PN Junction}
	\label{fig:Doping_Profile_in_Linearly_Doped_PN_Junction}
\end{figure}

\subsection{Charge Density}

\begin{align*}
	\rho(x) &=
		\begin{cases}
			q a x & ;\quad -x_p \le x \le 0 \\
			q a x & ;\quad 0 \le x \le x_p  \\
		\end{cases}\\
	&= q a x
\end{align*}
for $-x_p \le x \le x_n$.
Therefore, the charge density is as in \cref{fig:Charge_Distribution_in_Linearly_Doped_PN_Junction}.
\begin{figure}[h]
	\centering
	\begin{tikzpicture}
		\def\xMIN{-4};
		\def\xMAX{4};
		\def\yMIN{-4};
		\def\yMAX{4};
		\def\a{1};
		\def\xP{2};
		\def\xN{2};

		\begin{scope}[stealth-stealth]
			\draw (\xMIN,0) -- (\xMAX,0) node [right] {$x$};
			\draw (0,\yMIN) -- (0,\yMAX) node [above] {$\rho(x)$};
		\end{scope}

		\begin{scope}
			\draw (-\xP,0) -- (-\xP,-\a*\xP);
			\draw (-\xP,-\a*\xP) -- (0,0);
			\draw (0,0) -- (\xN,\a*\xN);
			\draw (\xN,\a*\xN) -- (\xN,0);
		\end{scope}

		\begin{scope}
			\node at (\xMIN/2,\yMAX) {P-type};
			\node at (\xMAX/2,\yMAX) {N-type};
		\end{scope}

		\begin{scope}
			\filldraw (-\xP,0) circle (1pt) node [above] {$-x_p$};
			\filldraw (\xN,0) circle (1pt) node [below] {$x_n$};
			\filldraw (0,-\a*\xP) circle (1pt) node [right] {$-q a x_p$};
			\filldraw (0,\a*\xN) circle (1pt) node [left] {$-q a x_n$};
		\end{scope}
	\end{tikzpicture}
	\caption{Charge Distribution in Linearly Doped PN Junction}
	\label{fig:Charge_Distribution_in_Linearly_Doped_PN_Junction}
\end{figure}

\subsection{Electric Field}

By Gauss' Law,
\begin{align*}
	\mathcal{E}(x) & = \frac{q a}{\varepsilon \varepsilon_0} \left( \frac{x^2}{2} + c \right)
\end{align*}
for $-x_p \le x \le x_n$.\\
As the electric field must be continuous,
\begin{align*}
	\mathcal{E}(-x_p) & = 0 \\
	\mathcal{E}(x_n)  & = 0
\end{align*}
Therefore, solving and substituting,
\begin{align*}
	\mathcal{E}(x) & = \frac{q \alpha}{2 \varepsilon \varepsilon_0} \left( x^2 - \frac{W^2}{4} \right)
\end{align*}

\subsection{Width of Depletion Region}

As the junction is electrically neutral,
\begin{align*}
	\frac{q a {x_n}^2}{2} & = \frac{q a {x_p}^2}{2} \\
	\therefore x_n        & = x_p                   \\
                              & = \frac{W}{2}
\end{align*}
Also,
\begin{align*}
	\dod{V}{x}      & = -\mathcal{E}(x) \\
	\therefore V(x) & = -\frac{q a}{2 \varepsilon \varepsilon_0} \left( \frac{x^3}{3} - \frac{W^2}{4} x + c \right)
\end{align*}
Let the potential at $-x_p$ be zero.\\
Therefore, solving and substituting,
\begin{align*}
	V(x) & = -\frac{q a}{6 \varepsilon \varepsilon_0} \left( x^3 - 3 \frac{W^2}{4} x - \frac{2}{8} W^3 \right)
\end{align*}
Therefore, by definition,
\begin{align*}
	V_{\text{BI}} & = V(x_n)                                                                                                                \\
                      & = -\frac{q a}{6 \varepsilon \varepsilon_0} \left( {x_n}^3 - 3 \frac{W^2}{4} x_n - \frac{2}{8} W^3 \right)
                      & = -\frac{q a}{6 \varepsilon \varepsilon_0} \left( \frac{W^3}{8} - 4 \frac{W^2}{4} \frac{W}{2} - \frac{2}{8} W^3 \right) \\
                      & = \frac{q a}{12 \varepsilon \varepsilon_0} W^3                                                                          \\
	\therefore W  & = \left( \frac{12 V_{\text{BI}} \varepsilon \varepsilon_0}{q \alpha} \right)^{\frac{1}{3}}
\end{align*}

\subsection{Electrostatic Potential}

\begin{align*}
	\mathcal{E}(x) & = -\frac{k T}{q} \frac{\dod{n}{x}}{n}               \\
                       & = -\frac{k T}{q} \frac{\dod{\alpha x}{x}}{\alpha x} \\
                       & = -\frac{k T}{q} \frac{1}{x}
\end{align*}
Therefore,
\begin{align*}
	V(x) \propto \ln(x)
\end{align*}
Therefore,
\begin{align*}
	V_{\text{BI}} & = \frac{k T}{q} \ln\left( \frac{N_D(x_n) N_A(-x_p)}{{n_i}^2} \right)    \\
                      & = \frac{k T}{q} \ln\left( \frac{\alpha x_n \alpha x_p}{{n_i}^2} \right) \\
                      & = \frac{k T}{q} \ln\left( \frac{\alpha^2 \left( \frac{W}{2} \right)^2}{{n_i}^2} \right)
\end{align*}

\begin{question}
	Consider a silicon PN junction, at equilibrium at $300 \kelvin$, with doping
	\begin{align*}
		N_D - N_A &=
			\begin{cases}
				-N_A     & ;\quad x < 0 \\
				\alpha x & ;\quad x > 0 \\
			\end{cases}
	\end{align*}
	Find
	\begin{enumerate}
		\item Charge density
		\item Relation between $x_n$ and $x_p$
		\item Electric field
		\item Electrostatic potential
	\end{enumerate}
\end{question}

\begin{solution}
	\begin{enumerate}[leftmargin=*]
		\item
			\begin{align*}
				\rho(x) &=
					\begin{cases}
						-q N_A   & ;\quad x < 0 \\
						q \alpha & ;\quad x > 0 \\
					\end{cases}
			\end{align*}
		\item
			As the junction is electrically neutral, the area under the curve of $\rho(x)$ on the P-type side must be equal to that on the N-type side.
			Therefore,
			\begin{align*}
				q N_A x_p          & = \frac{1}{2} (q \alpha x_n) (x_n) \\
				\therefore N_A x_p & = \frac{1}{2} \alpha {x_n}^2
			\end{align*}
		\item
			\begin{align*}
				\mathcal{E}(x) &=
					\begin{cases}
						-\frac{q N_A}{\varepsilon \varepsilon_0} (x + c_1) &;\quad -x_p \le x \le 0\\
						\frac{q \alpha}{\varepsilon \varepsilon_0} \left( \frac{x^2}{2} + c_2 \right) &;\quad 0 \le x \le x_n\\
					\end{cases}
			\end{align*}
			At the boundaries of the depletion region, the electric field must be zero.
			Therefore,
			\begin{align*}
				\mathcal{E}(-x_p) & = 0 \\
				\mathcal{E}(x_n)  & = 0 \\
			\end{align*}
			Therefore, solving,
			\begin{align*}
				c_1 & = x_p \\
				c_2 & = -\frac{{x_n}^2}{2}
			\end{align*}
			Therefore,
			\begin{align*}
				\mathcal{E}(x) &=
					\begin{cases}
						-\frac{q N_A}{\varepsilon \varepsilon_0} (x + x_p)                        & ;\quad -x_p \le x \le 0 \\
						\frac{q \alpha}{2 \varepsilon \varepsilon_0} \left( x_2 - {x_n}^2 \right) & ;\quad 0 \le x \le x_n  \\
					\end{cases}
			\end{align*}
		\item
			\begin{align*}
				\dod{V}{x} &= \mathcal{E}(x)\\
				\therefore V(x) &=
					\begin{cases}
						\frac{q N_A}{\varepsilon \varepsilon_0} \left( \frac{x^2}{2} + x_p x + c_1 \right)         & ;\quad -x_p \le x \le 0 \\
						-\frac{q \alpha}{\varepsilon \varepsilon_0} \left( \frac{x^3}{3} - {x_n}^2 x + c_2 \right) & ;\quad 0 \le x \le x_n  \\
					\end{cases}
			\end{align*}
			Let the potential at $-x_p$ be zero.
			Therefore, by definition,
			\begin{align*}
				V_{\text{BI}} & = V(x_n)
			\end{align*}
			Therefore, substituting and solving,
			\begin{align*}
				c_1 & = \frac{{x_p}^2}{2} \\
				c_2 & = -\frac{2 \varepsilon \varepsilon_0 V_{\text{BI}}}{q \alpha} + \frac{2}{3} {x_n}^3
			\end{align*}
			Therefore,
			\begin{align*}
				V(x) &=
					\begin{cases}
						\frac{q N_A}{\varepsilon \varepsilon_0} \left( \frac{x^2}{2} + x_p x + \frac{{x_p}^2}{2} \right)                                                                        & ;\quad -x_p \le x \le 0 \\
						-\frac{q \alpha}{\varepsilon \varepsilon_0} \left( \frac{x^3}{3} - {x_n}^2 x - \frac{2 \varepsilon \varepsilon_0 V_{\text{BI}}}{q \alpha} + \frac{2}{3} {x_n}^3 \right) & ;\quad 0 \le x \le x_n  \\
					\end{cases}
			\end{align*}
	\end{enumerate}
\end{solution}

\section{Biased PN Junctions}

Consider a PN step junction at equilibrium.\\
~\\
Let the width of the depletion region on the P-side be ${x_p}_0$, and that on the N-type side be ${x_n}_0$.\\
Let the builtin voltage be $V_{\text{BI}}$.\\
Let the internal electric field in the depletion region be $\mathcal{E}$.
Therefore, $\mathcal{E}$ is directed from the N-type region to the P-type region.\\
~\\
Let the diode be connected to a voltage source as in \cref{fig:PN_Junction_in_Bias}.
\begin{figure}[h]
	\centering
	\begin{tikzpicture}
		\def\l{2};
		\def\h{1};
		\def\xP{0.25};
		\def\xN{0.5};

		\begin{scope}
			\draw (-\l,-\h/2) rectangle (0,\h/2);
			\draw (0,-\h/2) rectangle (\l,\h/2);
		\end{scope}
		
		\begin{scope}
			\draw (\l,0) -| (2*\l,-2*\h);
			\draw (-\l,0) -| (-2*\l,-2*\h);
			\draw (2*\l,-2*\h) to [battery1 = $V_a$] (-2*\l,-2*\h);
		\end{scope}

		\begin{scope}
			\node at (\l/2,0) {N};
			\node at (-\l/2,0) {P};
		\end{scope}
	\end{tikzpicture}
	\caption{PN Junction in Bias}
	\label{fig:PN_Junction_in_Bias}
\end{figure}
Modelling the diode as resistors, let the resistance of the depletion region be $R_D$, that of the remaining P-type part be $R_P$, and that of the remaining N-type part be $R_N$.\\
The resistivity in a region is
\begin{align*}
	\rho & = \frac{1}{q (\mu_n n + \mu_p p)}
\end{align*}
In the depletion region, there are very few free charge carriers, compared to the remaining P-type and N-type regions.
Therefore,
\begin{align*}
	\rho_D & >> R_P \\
	\rho_D & >> R_N
\end{align*}
Therefore,
\begin{align*}
	R_D & >> R_P \\
	R_D & >> R_N
\end{align*}
Therefore, for practical purposes, it can be assumed that the entire voltage drop in on the depletion region.\\
Therefore,
\begin{align*}
	E(x) & = -q V(x)
\end{align*}
Therefore, if $V(x)$ is increased, the energy bands shift downwards, as compared to their equilibrium positions.
If $V(x)$ is decreased, the energy bands shift upwards, as compared to their equilibrium positions.\\
Therefore, if the applied external voltage $V_a$ is positive, the energy bands shift upwards, and if it is negative, the energy bands shift downwards.\\
Therefore, the difference between the energy bands at the two terminals, increases by $q V_a$.\\
If $V_a$ is positive, the PN junction is said to be in forward bias, and if it is negative, the PN junction is said to be in reverse bias.\\
~\\
Therefore, due to $V_a$, there will be an electric field generated, directed in the direction of $V_a$.\\
If $V_a > 0$, the generated electric field opposes the internal electric field.
Therefore, the net electric field is smaller in magnitude than at equilibrium.\\
Therefore, the width of the depletion region is smaller than that at equilibrium.\\
~\\
By Gauss' Law, the slope of the curve of the electric field represents the charge density.
Therefore, as the charge density must be the same as at equilibrium, the slope of the electric field also must be the same as at equilibrium.
\todo{Why?}
\todo{Add breakdown of Fermi levels}

\begin{question}
	Consider a PN step junction at $300 \kelvin$.
	Given
	\begin{align*}
		N_A & = 10^{16} \si{\per\centi\metre\cubed} \\
		N_D & = 10^{16} \si{\per\centi\metre\cubed}
	\end{align*}
	find the width of the depletion region on each side of the junction, for
	\begin{enumerate}
		\item $V_a = 0$
		\item $V_a = 0.5 \volt$
		\item $V_a = -0.5 \volt$
	\end{enumerate}
\end{question}

\begin{solution}
	\begin{enumerate}[leftmargin=*]
		\item
			As the junction is a step junction,
			\begin{align*}
				W & = \sqrt{\frac{2 \varepsilon \varepsilon_0}{q} (V_{\text{BI}} + V_a) \left( \frac{N_A + N_D}{N_A N_D} \right)}
                                  & = \sqrt{\frac{2 \varepsilon \varepsilon_0}{q} (V_{\text{BI}} + 0) \left( \frac{N_A + N_D}{N_A N_D} \right)}
			\end{align*}
			Therefore, substituting and solving,
			\begin{align*}
				W & = 0.432 \si{\micro\metre}
			\end{align*}
			As the junction is electrically neutral,
			\begin{align*}
				N_A x_p        & = N_D x_n \\
				\therefore x_p & = x_n     \\
                                               & = \frac{W}{2}
			\end{align*}
			Therefore,
			\begin{align*}
				x_p & = x_n \\
                                    & = 0.216 \si{\micro\metre}
			\end{align*}
		\item
			As the junction is a step junction,
			\begin{align*}
				W & = \sqrt{\frac{2 \varepsilon \varepsilon_0}{q} (V_{\text{BI}} + V_a) \left( \frac{N_A + N_D}{N_A N_D} \right)}
                                  & = \sqrt{\frac{2 \varepsilon \varepsilon_0}{q} (V_{\text{BI}} + 0.5 \volt) \left( \frac{N_A + N_D}{N_A N_D} \right)}
			\end{align*}
			Therefore, substituting and solving,
			\begin{align*}
				W & = 0.238 \si{\micro\metre}
			\end{align*}
			As the junction is electrically neutral,
			\begin{align*}
				N_A x_p        & = N_D x_n \\
				\therefore x_p & = x_n     \\
                                               & = \frac{W}{2}
			\end{align*}
			Therefore,
			\begin{align*}
				x_p & = x_n \\
                                    & = 0.119 \si{\micro\metre}
			\end{align*}
		\item
			As the junction is a step junction,
			\begin{align*}
				W & = \sqrt{\frac{2 \varepsilon \varepsilon_0}{q} (V_{\text{BI}} + V_a) \left( \frac{N_A + N_D}{N_A N_D} \right)}
                                  & = \sqrt{\frac{2 \varepsilon \varepsilon_0}{q} (V_{\text{BI}} - 0.5 \volt) \left( \frac{N_A + N_D}{N_A N_D} \right)}
			\end{align*}
			Therefore, substituting and solving,
			\begin{align*}
				W & = 0.563 \si{\micro\metre}
			\end{align*}
			As the junction is electrically neutral,
			\begin{align*}
				N_A x_p        & = N_D x_n \\
				\therefore x_p & = x_n     \\
                                               & = \frac{W}{2}
			\end{align*}
			Therefore,
			\begin{align*}
				x_p & = x_n \\
                                    & = 0.281.5 \si{\micro\metre}
			\end{align*}
	\end{enumerate}
\end{solution}

\section{Currents in PN Junctions}

At equilibrium, the concentration of electrons is higher in the N-type region is higher than that in the P-type region.
Therefore, they tend to diffuse from the N-type region to the P-type region.
However, as there is an energy barrier in the depletion region, only the electrons with $E > E_C$ can diffuse and cross over.
Therefore, an electron diffusion current is generated.\\
Similarly, the holes with $E < E_V$ diffuse from the P-type region to the N-type region, and a hole diffusion current is generated.\\
When the electrons and holes diffuse and cross over into the other region, they leave behind fixed charges.
This results in an internal electric field being generated in the depletion region.\\
Due to the internal electric field, electrons in the conduction band of the P-type region drift from the P-type region to the N-type region.
Therefore, an electron drift current is generated.\\
Similarly, the holes in the valence band of the N-type region drift from the N-type region to the P-type region, and a hole drift current is generated.\\
As the junction is at equilibrium,
\begin{align*}
	J_{\text{total}} &= 0
\end{align*}
Therefore,
\begin{align*}
	J_{\text{diffusion}_p} + J_{\text{drift}_p} &= 0\\
	J_{\text{diffusion}_n} + J_{\text{drift}_n} &= 0
\end{align*}
The magnitude of the diffusion current is determined by the height of the energy barrier.\\
The magnitude of the drift current is determined by the magnitude of the internal electric field and the concentration of minority carriers only.
Therefore, the height of the energy barrier does not affect the magnitude of the drift current.\\
Therefore, if the height of the energy barrier is lowered, the magnitude of the diffusion currents increases, but that of the drift currents does not.\\
~\\
The electron and hole diffusion currents are directed from the P-type region to the N-type region, and the electron and hole drift currents are directed from the N-type region to the P-type region.
In equilibrium, the two are equal in magnitude and opposite in direction.
Therefore, there is no net current.\\
If the junction is in forward bias, the height of the energy barrier is less than that at equilibrium.
Therefore, the magnitude of the diffusion current is more than that of the drift current.
Therefore, the net current is directed from the P-type side to the N-type side.\\
Similarly, if the junction is in reverse bias, the height of the energy barrier is greater than that in equilibrium, and hence, the net current is directed from the N-type side to the P-type side.

\section{Carrier Profiles}

Let the hole concentration in the P-type region be $p_P$.\\
Let the electron concentration in the N-type region be $n_N$.\\
Let the electron concentration in the P-type region be ${n_P}_0$.\\
Let the electron concentration at the interface of the P-type region and the depletion region be $n_N$.
Let the hole concentration in the P-type region be ${p_N}_0$.\\
Let the electron concentration at the interface of the N-type region and the depletion region be $p_N$.\\

\begin{align*}
	V_{\text{BI}} &= \frac{k T}{q} \ln\left( \frac{N_D(x_n) N_A(-x_p)}{{n_i}^2} \right)\\
	&= \frac{k T}{q} \ln\left( \frac{n_N p_P}{{n_i}^2} \right)
\end{align*}
If the junction is in equilibrium,
\begin{align*}
	n_P &= \frac{{n_i}^2}{p_P}\\
	&= n_N e^{-\frac{q V_{\text{BI}}}{k T}}\\
	&= {n_P}_0\\
	p_N &= \frac{{n_i}^2}{n_N}\\
	&= p_P e^{-\frac{q V_{\text{BI}}}{k T}}\\
	&= {p_N}_0
\end{align*}
If the junction is in bias,
\begin{align*}
	n_P &= n_N e^{-\frac{q (V_{\text{BI}} - V_a)}{k T}}\\
	&= {n_P}_0 e^{\frac{q V_a}{k T}}\\
	p_N &= p_P e^{-\frac{q (V_{\text{BI}} - V_a)}{k T}}\\
	&= {p_N}_0 e^{\frac{q V_a}{k T}}
\end{align*}
In general, if the junction is in forward bias, the curves of the minority carriers bend upwards in the form of an exponential, and in reverse bias, the curves bend downwards in the form of an exponential.\\
The P-type and N-type regions can be considered as semiconductors illuminated from one end only.
Therefore, setting up the $x$-axes for each of the region such that origin is at the interface of the respective region and the depletion region, with the positive direction directed outwards,
\begin{align*}
	n_P &= {n_P}_0 e^{\frac{q V_a}{k T}}\\
	&= {n_P}_0 + \hat{n}(x = 0)\\
	p_N &= {p_N}_0 e^{\frac{q V_a}{k T}}\\
	&= {p_N}_0 + \hat{p}(x = 0)
\end{align*}
Also,
\begin{align*}
	\hat{n}(x = 0) &= {n_P}_0 \left( e^{\frac{q V_a}{k T}} - 1 \right)\\
	\hat{p}(x = 0) &= {p_N}_0 \left( e^{\frac{q V_a}{k T}} - 1 \right)
\end{align*}
Therefore,
\begin{align*}
	\hat{n}(x) &= {n_P}_0 \left( e^{\frac{q V_a}{k T}} - 1 \right) e^{-\frac{x}{L_n}}\\
	\hat{p}(x) &= {p_N}_0 \left( e^{\frac{q V_a}{k T}} - 1 \right) e^{-\frac{x}{L_p}}
\end{align*}
Therefore,
\begin{align*}
	J_{\text{diffusion}_n} &= q D_n \dod{n}{x}\\
	&= q D_n \dod{\hat{n}}{x}\\
	&= -q \frac{D_n}{L_n} {n_P}_0 \left( e^{\frac{q V_a}{k T}} - 1 \right) e^{-\frac{x}{L_n}}\\
	J_{\text{diffusion}_p} &= q D_p \dod{p}{x}\\
	&= q D_p \dod{\hat{p}}{x}\\
	&= -q \frac{D_p}{L_p} {p_N}_0 \left( e^{\frac{q V_a}{k T}} - 1 \right) e^{-\frac{x}{L_p}}
\end{align*}
The continuity equation for electrons in the depletion region is
\begin{align*}
	\dpd{\hat{n}}{t} &= \frac{1}{q} \dpd{J_n}{x} - \frac{\hat{n}}{\tau_n} + G
\end{align*}
Assuming that no generation or recombination of EHPs occurs in the depletion region,
\begin{align*}
	G &= 0\\
	\tau_n &= 0
\end{align*}
As the junction is in steady state,
\begin{align*}
	\dpd{\hat{n}}{t} &= 0
\end{align*}
Therefore,
\begin{align*}
	\frac{1}{q} \dpd{J_n}{x} &= 0
\end{align*}
Similarly,
\begin{align*}
	\frac{1}{q} \dpd{J_p}{x} &= 0
\end{align*}
Therefore as $J_n$ and $J_p$ are constant in the depletion region,
\begin{align*}
	J_n(-x_p < x < x_n) &= J_n(x = -x_p)\\
	J_p(-x_p < x < x_n) &= J_p(x = x_n)
\end{align*}
Therefore,
\begin{align*}
	J_{\text{total}} &= J_{\text{diffusion}_n}(x = 0) + J_{\text{diffusion}_p}(x = 0)\\
	&= q \left( \frac{D_n}{L_n} {n_P}_0 + \frac{D_p}{L_p} {p_N}_0 \right) \left( e^{\frac{q V_a}{k T}} - 1 \right)
\end{align*}
where each $x = 0$ corresponds to the respective $x$-axis.\\
Let
\begin{align*}
	J_0 &= q \left( \frac{D_n}{L_n} {n_P}_0 + \frac{D_p}{L_p} {p_N}_0 \right)
\end{align*}
Therefore,
\begin{align*}
	J_{\text{total}} &= J_0 \left( e^{\frac{q V_a}{k T}} - 1 \right)
\end{align*}
As the total current in the junction must be constant, the majority and minority currents in each of the regions must add up to $J_{\text{total}}$.

\begin{question}
	Consider a silicon sample with
	\begin{align*}
		N_D &= 10^{16} \si{\per\centi\metre\cubed}\\
		\tau_n &= 1 \si{\micro\second}\\
		\tau_p &= 1 \si{\micro\second}\\
		D_n &= 40 \si{\centi\metre\squared\per\second}\\
		D_p &= 25 \si{\centi\metre\squared\per\second}
	\end{align*}
	is maintained at steady state at $300 \kelvin$.
	The hole concentration at the left end is $10^{14} \si{\per\centi\metre\cubed}$.
	What is $p(x)$ at steady state?
\end{question}

\begin{solution}
	Let the left end of the sample correspond to $x = 0$.\\
	Therefore,
	\begin{align*}
		\dpd{\hat{p}}{t} &= -\frac{1}{q} \dpd{J_p}{x} - \frac{\hat{p}}{\tau_p} + G_{\text{optical}}\\
		J_p &= q \mu_p p \mathcal{E} - q D_p \dod{p}{x}
	\end{align*}
	As $\mathcal{E} = 0$,
	\begin{align*}
		J_p &= -q D_p \dod{p}{x}\\
		&= -q D_p \dod{\hat{p}}{x}
	\end{align*}
	As the sample is in steady state,
	\begin{align*}
		\dpd{\hat{p}}{t} &= 0
	\end{align*}
	As the sample is illuminated at the end only,
	\begin{align*}
		G_{\text{optical}} &= 0
	\end{align*}
	Therefore, substituting,
	\begin{align*}
		0 &= D_p \dod[2]{\hat{p}}{x} - \frac{\hat{p}}{\tau_p}\\
		\therefore \dod[2]{\hat{p}}{x} &= \frac{1}{D_p \tau_p}\\
		\therefore \dod[2]{\hat{p}}{x} &= \frac{1}{{L_p}^2}\\
	\end{align*}
	Therefore,
	\begin{align*}
		\hat{p}(x) &= c_1 e^{\frac{x}{L_p}} + c_2 e^{-\frac{x}{L_p}}
	\end{align*}
	Substituting the initial conditions,
	\begin{align*}
		c_1 &= 0\\
		c_2 &= 10^{14}
	\end{align*}
	Therefore,
	\begin{align*}
		\hat{p}(x) &= 10^{14} e^{-\frac{x}{L_p}}
	\end{align*}
\end{solution}

\begin{question}
	Consider a silicon PN step junction at $300 \kelvin$.
	The steady state distribution is as shown.
	\begin{figure}[H]
		\centering
		\begin{tikzpicture}[yscale = 0.5]
			\def\xMIN{-5};
			\def\xMAX{5};
			\def\yMIN{-1};
			\def\yMAX{16};

			\def\xP{1};
			\def\xN{1};

			\begin{scope}[stealth-stealth]
				\draw (\xMIN,0) -- (\xMAX,0) node [right] {$x$};
				\filldraw (-\xP,0) circle (1pt) node [below] {$-x_p$};
				\filldraw (\xN,0) circle (1pt) node [below] {$x_n$};
			\end{scope}

			\begin{scope}
				\draw (\xMIN,14) node [left] {$10^{14}$} -- (-\xP,14);
				\draw (\xMIN,6) node [left] {$10^6$} to [out = 0, in = 100] (-\xP,3) node [right] {$10^3$};
			\end{scope}

			\begin{scope}
				\draw (\xMAX,15) node [right] {$10^{15}$} -- (\xN,15);
				\draw (\xMAX,5) node [right] {$10^5$} to [out = 180, in = 80] (\xN,2) node [right] {$10^3$};
			\end{scope}
		\end{tikzpicture}
	\end{figure}
	\begin{enumerate}
		\item Is the junction in forward bias or reverse bias?
		\item Find $V_a$.
	\end{enumerate}
\end{question}

\begin{solution}
	\begin{enumerate}[leftmargin=*]
		\item
			\begin{align*}
				n_P &= {n_P}_0 e^{\frac{q V_a}{k T}}\\
				\therefore 10^{3} &= 10^{6} e^{\frac{q V_a}{k T}}
			\end{align*}
			Therefore,
			\begin{align*}
				e^{\frac{q V_a}{k T}} &< 1\\
				\therefore V_a &< 0
			\end{align*}
			Therefore, the junction is in reverse bias.
		\item
			\begin{align*}
				e_{\frac{q V_a}{k T}} &= \frac{n_P}{{n_P}_0}\\
				&= \frac{p_N}{{p_N}_0}\\
				&= 10^{-3}
			\end{align*}
			Therefore,
			\begin{align*}
				V_a &= \frac{k T}{q} \ln\left( 10^{-3} \right)\\
				&= -0.18 \volt
			\end{align*}
	\end{enumerate}
\end{solution}

\begin{question}
	Consider a silicon PN step junction at $300 \kelvin$ such that
	\begin{align*}
		N_A &= 3 \times 10^{16} \si{\per\centi\metre\cubed}\\
		N_D &= 2 \times 10^{15} \si{\per\centi\metre\cubed}\\
		D_n &= 50 \si{\centi\metre\squared\per\second}\\
		D_n &= 10 \si{\centi\metre\squared\per\second}\\
		\tau_n &= \tau_p
	\end{align*}
	Given that
	\begin{align*}
		n_P &= 10^{15}\\
		{n_P}_0(3 \si{\micro\metre}) &= 3.7 \times 10^{14}
	\end{align*}
	\begin{enumerate}
		\item Find the minority current density at $x > 0$.
		\item Find the applied voltage.
		\item Find $J_{\text{total}}$ for $V_a = 0.6 \volt$.
	\end{enumerate}
\end{question}

\begin{solution}
	\begin{enumerate}[leftmargin=*]
		\item
			\begin{align*}
				\hat{n}(x) &= \hat{n}(x = 0) e^{-\frac{x}{L_n}}\\
				\therefore L_n &= 3 \si{\micro\metre}
			\end{align*}
			Therefore,
			\begin{align*}
				J_{\text{diffusion}_n}(x = 0) &= -q \frac{D_n}{L_n} {n_P}_0 \left( e^{\frac{q V_a}{k T}} - 1 \right)\\
				&= -\left( 1.6 \times 10^{-19} \right) \left( \frac{50}{3 \times 10^{-4}} \right) \left( 10^{15} \right)\\
				&= -26.67 \si{\ampere\per\centi\metre\squared}
			\end{align*}
		\item
			\begin{align*}
				\hat{n}(x = 0) &= {n_P}_0 \left( e^{\frac{q V_a}{k T}} - 1 \right)
			\end{align*}
			As the minority carrier concentration at the interface of the depletion region is greater than that inside the region, the function is in forward bias.
			Therefore,
			\begin{align*}
				\hat{n}(x = 0) &= {n_P}_0 e^{\frac{q V_a}{k T}}
			\end{align*}
			Therefore,
			\begin{align*}
				V_a &= \frac{k T}{q} \ln\left( \frac{\hat{n}(x = 0)}{{n_P}_0} \right)\\
				&= 0.026 \ln\left( \frac{N_A \hat{n}(x = 0)}{{n_i}^2} \right)\\
				&= 0.026 \ln \left( \frac{3 \times 10^{16} 10^{15}}{10^{20}} \right)\\
				&= 0.687 \volt
			\end{align*}
		\item
			\begin{align*}
				J_{\text{total}} &= q \left( \frac{D_p}{L_p} {p_N}_0 + \frac{D_n}{L_n} {n_P}_0 \right) \left( e^{\frac{q V_a}{k T}} - 1 \right)
			\end{align*}
			As the junction is in forward bias,
			\begin{align*}
				J_{\text{total}} &= q \left( \frac{D_p}{L_p} {p_N}_0 + \frac{D_n}{L_n} {n_P}_0 \right) \left( e^{\frac{q V_a}{k T}} \right)
			\end{align*}
			Also,
			\begin{align*}
				L_p = \sqrt{\tau_p D_p}\\
				&= \sqrt{\tau_p D_p} \frac{\sqrt{D_p}}{\sqrt{D_p}}\\
				&= \sqrt{\tau_p D_n} \sqrt{\frac{D_p}{D_n}}\\
				&= \sqrt{\tau_n D_n} \sqrt{\frac{D_p}{D_n}}\\
				&= L_n \sqrt{\frac{D_p}{D_n}}
			\end{align*}
			Therefore, as $L_n = 3 \si{\micro\metre}$,
			\begin{align*}
				L_p &= 3 \sqrt{\frac{10}{50}}\\
				&= 1.34 \times 10^{-4} \si{\centi\metre}
			\end{align*}
			Therefore, solving,
			\begin{align*}
				J_{\text{total}} &= \left( \left( \frac{10}{1.34 \times 10^{-4}} \right) \left( \frac{10^{20}}{2 \times 10^{15}} \right) + \left( \frac{50}{3 \times 10^{-4}} \right) \left( \frac{10^{20}}{3 \times 10^{16}} \right) \right) e^{\frac{0.6}{0.026}}\\
				&= 7.12 \si{\ampere\per\centi\metre\squared}
			\end{align*}
	\end{enumerate}
\end{solution}

\begin{question}
	Consider a silicon PN step junction such that
	\begin{align*}
		\tau_n &= 0.1 \si{\micro\second}\\
		\tau_p &= 0.1 \si{\micro\second}\\
		D_n &= 25 \si{\centi\metre\squared\per\second}\\
		D_p &= 10 \si{\centi\metre\squared\per\second}
	\end{align*}
	Find the ratio of the doping such that $95\%$ of the current in the depletion region is due to electrons.
\end{question}

\begin{solution}
	\begin{align*}
		J_{\text{total}} &= q \left( \frac{D_p}{L_p} {p_N}_0 + \frac{D_n}{L_n} {n_P}_0 \right) \left( e^{\frac{q V_a}{k T}} - 1 \right)
	\end{align*}
	Therefore, the contribution of the electrons corresponds to $\frac{D_n}{L_n} {n_P}_0$ and that of the holes corresponds to $\frac{D_p}{L_p} {p_N}_0$.
	Therefore, for the required ratio,
	\begin{align*}
		0.95 &= \frac{\frac{D_n}{L_n} {n_P}_0}{\frac{D_n}{L_n} {n_P}_0 \frac{D_p}{L_p} {p_N}_0}\\
		\therefore \frac{D_n}{L_n} {n_P}_0 &= 19 \frac{D_p}{L_p} {p_N}_0\\
		\therefore \frac{D_n}{L_n} {{n_i}^2}{N_A} &= 19 \frac{D_p}{L_p} \frac{{n_i}^2}{N_D}\\
		\therefore \frac{N_A}{N_D} &= \frac{D_n}{L_n} \frac{L_p}{D_p} \frac{1}{19}\\
		&= \frac{D_n}{\sqrt{D_n \tau_n}} \frac{\sqrt{D_p \tau_p}}{D_p} \frac{1}{19}\\
		&= 0.083
	\end{align*}
\end{solution}

\end{document}
